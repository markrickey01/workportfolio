/* =============================================================
   Mark Rickey — Portfolio CSS (full rewrite focused on card-safe media)
   Goals
   - Keep your brand palette & hero vibe
   - Make every work-experience card image fit INSIDE the card borders
   - Zero overflow, no distortion, crisp rounding
   - Consistent aspect ratios with flexible utilities
   
   HTML hook (recommended structure):
   <article class="card">
     <div class="card-media">  <!-- or .card-media.media--square / .media--golden -->
       <img src="..." alt="..." />
     </div>
     <div class="card-body"> ... </div>
   </article>

   If your existing markup has <img class="dock-img"> directly in the card,
   this CSS still handles it (see the legacy section near the end).
   ============================================================= */

/* ===== CSS Reset (modern, minimal) ===== */
*,*::before,*::after{box-sizing:border-box}
html:focus-within{scroll-behavior:smooth}
html,body{height:100%}
body{margin:0;line-height:1.5;-webkit-font-smoothing:antialiased;color:#111827;background:#fff}
img,svg,video,canvas,audio,iframe,embed,object{display:block;max-width:100%}
img{height:auto}
input,button,textarea,select{font:inherit}
:root{--radius-card:1rem}

/* ===== Brand tokens ===== */
:root{
  --brand-blue:#3a668c;
  --brand-orange:#ff724f;
  --brand-cream:#fef5da;
  --ink:#111827;           /* gray-900 */
  --ink-dim:#6b7280;       /* gray-500 */
  --line:#e5e7eb;          /* gray-200 */
  --surface:#fff;
  --shadow-sm:0 1px 0 rgba(0,0,0,.03);
  --shadow-md:0 8px 24px rgba(0,0,0,.08);
  /* how far down the hero stays orange (96–99). higher = more orange */
  --hero-white-start:98.3%;
}

/* ===== Layout ===== */
.container{max-width:1100px;margin-inline:auto;padding-inline:1rem}
.section{background:#fff;padding:3rem 0}

/* ===== Hero (orange → white) ===== */
#home{
  min-height:82vh;padding-bottom:0;position:relative;isolation:isolate;
  background:linear-gradient(180deg,
    var(--brand-orange) 0%,
    #ff8f73 66%,
    #fff var(--hero-white-start),
    #fff 100%);
}
#work .container{padding-top:0 !important}

/* ===== Site Header ===== */
.site-header{position:sticky;top:0;z-index:50;background:var(--brand-orange);color:#fff;border-bottom:none;box-shadow:none}
.site-header a{color:#fff;text-decoration:none}
.site-header .nav-link{opacity:.9;padding:.75rem .5rem;display:inline-block}
.site-header .nav-link:hover{opacity:1}
.site-header.scrolled{box-shadow:var(--shadow-md)}
.nav-link.active{text-decoration:underline;text-underline-offset:6px}

/* Mobile menu */
.site-header .mobile-menu{position:absolute;left:0;right:0;top:100%;display:none;background:#fff;border-top:1px solid var(--line);padding:.25rem 0 .5rem;z-index:40}
.site-header .mobile-menu.open{display:block}
.site-header .mobile-menu a{color:var(--ink)}
@media (min-width:768px){.site-header .mobile-menu{display:none !important}}

/* ===== Cards ===== */
.card{
  background:var(--surface);border:1px solid var(--line);border-radius:var(--radius-card);
  box-shadow:var(--shadow-sm);overflow:hidden;display:flex;flex-direction:column;min-width:0
}
.card:hover{box-shadow:0 2px 16px rgba(0,0,0,.06)}
.card-body{padding:1rem 1rem 1.25rem}
.card-title{margin:0 0 .35rem;font-weight:700;font-size:1.05rem;color:var(--ink)}
.card-sub{margin:0 0 .75rem;color:var(--ink-dim);font-size:.92rem}

/* ===== CARD MEDIA — The star of this rewrite =====
   - Enforces an aspect-ratio box with overflow hidden
   - Crops via object-fit:cover (no distortion)
   - Rounds seamlessly with the card
   -------------------------------------------------- */
.card-media{position:relative;width:100%;aspect-ratio:16/9;overflow:hidden;border-bottom:1px solid var(--line)}
.card-media img, .card-media picture>img, .card-media video{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;display:block}
/* Rounded corners inherited from .card via overflow:hidden */

/* Aspect ratio utilities for different looks */
.media--square{aspect-ratio:1/1}
.media--landscape{aspect-ratio:4/3}
.media--widescreen{aspect-ratio:16/9}
.media--golden{aspect-ratio:1.618/1}
.media--tall{aspect-ratio:3/4}

/* Fallback for older browsers (optional): padding-top hack */
.no-aspect-ratio .card-media{aspect-ratio:auto}
.no-aspect-ratio .card-media::before{content:"";display:block;padding-top:56.25%} /* 16:9 */
.no-aspect-ratio .card-media > *{position:absolute;inset:0}

/* ===== Work grid ===== */
.work-grid{display:grid;gap:1rem}
@media (min-width:640px){.work-grid{grid-template-columns:repeat(2,minmax(0,1fr))}}
@media (min-width:1024px){.work-grid{grid-template-columns:repeat(3,minmax(0,1fr))}}

/* ===== Badges & chips ===== */
.badge{display:inline-block;border-radius:9999px;background:var(--brand-blue);color:#fff;font-size:12px;padding:.25rem .625rem}
.kpi{font-weight:700;font-size:1.25rem}
.kpi-sub{color:var(--ink-dim);font-size:12px}
.chip{display:inline-flex;align-items:center;border:1px solid var(--line);border-radius:9999px;padding:.25rem .625rem;font-size:12px;color:#374151;background:#fff}

/* ===== Inputs ===== */
.input{width:100%;padding:.75rem .875rem;border:1px solid var(--line);border-radius:.75rem;font-size:.95rem;background:#fff}
.input:focus{outline:none;box-shadow:0 0 0 3px rgba(58,102,140,.18);border-color:var(--brand-blue)}

/* ===== Buttons ===== */
.btn{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;padding:.6rem 1rem;border-radius:.75rem;border:1px solid transparent;font-weight:700;transition:background .15s,color .15s,border-color .15s,transform .05s}
.btn:active{transform:translateY(1px)}
.btn-primary{background:var(--brand-blue);border-color:var(--brand-blue);color:#fff}
.btn-primary:hover{filter:brightness(.95)}
.btn-outline{background:#fff;color:var(--brand-blue);border-color:var(--brand-blue)}
.btn-outline:hover{background:#f7fafc}
.btn-ghost{border-color:transparent;color:#fff}
.btn-soft{background:rgba(255,255,255,.14);color:#fff;border-color:rgba(255,255,255,.22);backdrop-filter:saturate(140%) blur(2px)}
.btn-soft:hover{background:rgba(255,255,255,.20)}

/* ===== A/B tile (kept, simplified) ===== */
.tile{perspective:900px}
.tile-inner{position:relative;height:100%;transform-style:preserve-3d;transition:transform .6s ease}
.tile:hover .tile-inner,.tile.is-flipped .tile-inner{transform:rotateY(180deg)}
.tile-face{position:absolute;inset:0;backface-visibility:hidden;border-radius:.6rem;overflow:hidden;background:linear-gradient(135deg,#eee,#fafafa)}
.tile-face.back{transform:rotateY(180deg)}
.thumb-svg{width:100%;height:100%;display:block}
.card:hover .tile-face .thumb-svg{transform:scale(1.02);transition:transform .35s ease}
.ab-chip{position:absolute;top:.4rem;left:.4rem;font-size:11px;font-weight:700;padding:.15rem .45rem;border-radius:9999px;color:#fff;box-shadow:0 2px 6px rgba(0,0,0,.15)}
.ab-a{background:var(--brand-blue)}
.ab-b{background:var(--brand-orange)}

/* ===== Legacy image hooks (so your current markup still works) ===== */
/* If a raw <img> sits directly inside .card (no .card-media wrapper),
   this ensures it still fits and rounds correctly */
.card > img,
.card img.dock-img{
  width:100%;height:auto;display:block;object-fit:cover; /* safe even when auto height */
  /* When images vary wildly in height, clamp with a max height
     and crop via object-fit. Adjust the value to taste. */
  max-height:260px; /* tweak or remove if using .card-media */
  border-bottom:1px solid var(--line)
}

/* ===== Utilities ===== */
.m-0{margin:0}.mt-0{margin-top:0}.mb-0{margin-bottom:0}
.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mt-3{margin-top:.75rem}.mt-4{margin-top:1rem}
.mb-1{margin-bottom:.25rem}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mb-4{margin-bottom:1rem}
.p-0{padding:0}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-4{padding:1rem}
.text-dim{color:var(--ink-dim)}

/* ===== Motion preferences ===== */
@media (prefers-reduced-motion:reduce){
  *,*::before,*::after{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important;scroll-behavior:auto!important}
}
/* --- CARD-SAFE MEDIA: hard clamp --- */

/* Make the card itself the clipping mask */
.card {
  border-radius: 1rem;
  overflow: hidden;                 /* <= the key */
  position: relative;
}

/* A predictable media box at the top of each card */
.card-media,
.card > img:first-child,
.card .dock-img:first-child,
.card .tile-face:first-child {
  display: block;
  width: 100%;
  aspect-ratio: 16 / 9;             /* pick your ratio */
  overflow: hidden;
  border-bottom: 1px solid #e5e7eb;
}

/* Anything inside that media box fills & crops (no distortion) */
.card-media img,
.card-media picture > img,
.card > img:first-child,
.card .dock-img:first-child,
.card .tile-face:first-child img,
.card .tile-face:first-child .thumb-svg,
.card .tile-face:first-child svg {
  width: 100% !important;
  height: 100% !important;
  object-fit: cover !important;
  display: block;
  border-radius: 0;                  /* card handles rounding */
}

/* If you’re using a .tile / .tile-face stack, match the rounding + clip */
.tile-face {
  border-radius: inherit !important;
  overflow: hidden !important;
}

/* If a background-image is used instead of <img>, force it to behave */
.card-media.bg,
.card.bg-cover,
.card .tile-face.bg {
  background-position: center;
  background-size: cover;
  background-repeat: no-repeat;
}

/* Optional: tighter card visuals */
.card-body { padding: 1rem 1rem 1.25rem; }
